#generated by ansible

tunnel: {{ argo_hostname }}-{{ device }}
uuid: {{ argo_uuid }}
credentials-file: {{ config_dir }}/{{ argo_uuid }}.json
logfile: {{ log_dir }}/cloudflared.log
autoupdate-freq: {{ autoupdate_freq }}

# ingress rules to provide to config file
ingress:
  {% for service, details in ingress_rules.items() %}
  - hostname: "{{ service }}-{{ device }}-{{ argo_hostname }}.cstunnel.xyz"
    service: "{{ details.protocol }}://localhost:{{ details.port }}"
  {% endfor %}
  #catch all rule
  - service: "http_status:404"
